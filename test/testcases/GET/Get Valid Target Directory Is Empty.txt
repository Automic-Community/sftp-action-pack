*** Settings ***
Suite Setup       Suite Setup
Force Tags        sftp export    valid    win    unix
Test Template     Get Template
Resource          ../../resources/keywords.txt

*** Variables ***

*** Test Cases ***    Source                                                                                               User                         Password       Recursive      Target
Admin User            ${_WORKING_DIR}${/}source${/}Notes.zip                                                               root                         ventum2011@    YES            ${_TARGET_DIR}${/}target

Rename At Target      ${_WORKING_DIR}${/}source${/}Notes.zip                                                               root                         ventum2011@    YES            ${_TARGET_DIR}${/}target${/}New_Notes.Zip

Access With Another User
                      ${_WORKING_DIR}${/}source${/}Notes.zip                                                               automic                      automic        YES            ${_TARGET_DIR}${/}target

From Empty Source     ${_WORKING_DIR}${/}source_empty                                                                      root                         ventum2011@    YES            ${_TARGET_DIR}${/}target

Access With Name Is Long
                      ${_WORKING_DIR}${/}source${/}1111111111111111111111111111111111111111111111111111111111111111.pdf    root                         ventum2011@    YES            ${_TARGET_DIR}${/}target

Recursive Yes         ${_WORKING_DIR}${/}source                                                                            root                         ventum2011@    YES            ${_TARGET_DIR}${/}target
                      #Recursive No                                                                                        ${_WORKING_DIR}${/}source    root           ventum2011@    NO                                           ${_TARGET_DIR}${/}target

*** Keywords ***
Suite Setup
    Init AE And Package
    Init SFTP Server

Get Template
    [Arguments]    ${source}    ${user}    ${password}    ${recursive}    ${target}
    Clean Up Directory    ${_TARGET_DIR}${/}target
    Init Action    ${ACTION_GET}
    Action Set    ${PRT_SFTP_HOST}    vvnappserver01
    #Action Set    ${PRT_SFTP_PORT}    139
    Action Set    ${PRT_SFTP_SOURCE_FILES}    ${source}
    Action Set    ${PRT_SFTP_USER}    ${user}
    Action Set    ${PRT_SFTP_PWD}    ${password}
    Action Set    ${PRT_SFTP_RECURSIVE_GET}    ${recursive}
    #Action Set    ${PRT_SFTP_CONNECT_TIMEOUT}    5000
    Action Set    ${PRT_SFTP_TGT_FILES_DIR}    ${target}
    Action Set    ${PRT_SFTP_TGT_OVERWRITE}    YES
    Action Set    ${PRT_SFTP_PRESERVE_ATT}    YES
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    0
    Action Return Status Should Be    ${EndedOK}
    #Action Report Should Contain    ${message}
    Action Report Should Contain    START AT
    #Action Report Should Contain    PARAMETER VALIDATION START
    #Action Report Should Contain    EXECUTION START
    Action Report Should Contain    ENDED AT
    #Action Report Should Contain    RET-CODE
